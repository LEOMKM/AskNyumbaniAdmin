(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},636:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),t(4687),t(878),t(5866);var s=t(3191),a=t(8716),i=t(7922),n=t.n(i),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4687)),"/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,878)),"/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx"],c="/login/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1892:(e,r,t)=>{Promise.resolve().then(t.bind(t,2346)),Promise.resolve().then(t.bind(t,6606)),Promise.resolve().then(t.bind(t,7480))},9137:(e,r,t)=>{Promise.resolve().then(t.bind(t,3718))},2230:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},3718:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var s=t(326),a=t(7577),i=t(5047),n=t(6606),o=t(772),l=t(9360),d=t(7863);let u=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef(({className:e,variant:r,...t},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,d.cn)(u({variant:r}),e),...t}));c.displayName="Alert",a.forwardRef(({className:e,...r},t)=>s.jsx("h5",{ref:t,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let m=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",e),...r}));m.displayName="AlertDescription";var p=t(165),g=t(6557);let x=(0,g.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function f({onSuccess:e,onBack:r}){let{loginWithPin:t,isLoading:i}=(0,n.a)(),[l,d]=(0,a.useState)(""),[u,g]=(0,a.useState)(""),[f,h]=(0,a.useState)(!1),v=(0,a.useRef)([]),y=(e,r)=>{if(!/^\d*$/.test(r))return;let t=l.split("");t[e]=r;let s=t.join("").slice(0,4);d(s),r&&e<3&&v.current[e+1]?.focus(),4===s.length&&N(s),u&&g("")},b=(e,r)=>{"Backspace"===r.key&&!l[e]&&e>0&&v.current[e-1]?.focus()},N=async r=>{let s=r||l;if(4===s.length){g(""),h(!0);try{let r=await t(s);r.success?e():(g(r.message),d(""),v.current[0]?.focus())}catch(e){g("An unexpected error occurred"),d(""),v.current[0]?.focus()}finally{h(!1)}}},j=e=>{e.preventDefault();let r=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);4===r.length&&(d(r),N(r))};return(0,s.jsxs)("div",{className:"space-y-6",children:[u&&s.jsx(c,{variant:"destructive",children:s.jsx(m,{children:u})}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center space-x-3",children:[0,1,2,3].map(e=>s.jsx("input",{ref:r=>{v.current[e]=r},type:"text",inputMode:"numeric",maxLength:1,value:l[e]||"",onChange:r=>y(e,r.target.value),onKeyDown:r=>b(e,r),onPaste:j,className:"w-12 h-12 text-center text-2xl font-bold border-2 border-input rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none disabled:opacity-50",disabled:f},e))}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your 4-digit PIN"})})]}),s.jsx(o.z,{onClick:()=>N(),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:4!==l.length||f||i,children:f?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground"}),s.jsx("span",{children:"Verifying PIN..."})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(p.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Verify PIN"})]})}),r&&(0,s.jsxs)(o.z,{type:"button",variant:"outline",onClick:r,className:"w-full",disabled:f,children:[s.jsx(x,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}var h=t(3071);let v=(0,g.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);function y(){let{user:e,isLoading:r}=(0,n.a)(),t=(0,i.useRouter)();return r?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 animate-in fade-in duration-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("span",{className:"text-muted-foreground animate-pulse",children:"Loading..."})]})}):e?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl animate-pulse delay-1000"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-primary via-primary to-primary/90 text-primary-foreground shadow-2xl relative overflow-hidden animate-in slide-in-from-top duration-700",children:[s.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),s.jsx("div",{className:"container mx-auto px-6 py-8 relative z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4 animate-in fade-in zoom-in duration-700 delay-200",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/20 rounded-2xl backdrop-blur-sm transition-all duration-300 hover:scale-110 hover:rotate-6 hover:bg-primary-foreground/30 cursor-pointer group",children:s.jsx(p.Z,{className:"h-10 w-10 text-primary-foreground transition-transform group-hover:rotate-12"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold text-primary-foreground tracking-tight flex items-center gap-2 justify-center",children:["AskNyumbani Admin",s.jsx(v,{className:"h-6 w-6 animate-pulse"})]}),s.jsx("p",{className:"text-primary-foreground/90 mt-1 text-lg",children:"Image Review & Approval System"})]})]})})]}),s.jsx("div",{className:"container mx-auto px-6 py-12 relative z-10",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto animate-in fade-in slide-in-from-bottom duration-700 delay-300",children:[(0,s.jsxs)(h.Zb,{className:"shadow-2xl border-2 hover:shadow-3xl transition-all duration-300 hover:scale-[1.02] backdrop-blur-sm bg-card/95",children:[(0,s.jsxs)(h.Ol,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto mb-4 p-4 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl w-fit transition-all duration-300 hover:scale-110 hover:rotate-6 animate-in zoom-in duration-500 delay-500 group",children:s.jsx(p.Z,{className:"h-10 w-10 text-primary transition-transform group-hover:rotate-12"})}),s.jsx(h.ll,{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent animate-in fade-in duration-500 delay-600",children:"Admin Login"}),s.jsx(h.SZ,{className:"text-base animate-in fade-in duration-500 delay-700",children:"Enter your 4-digit PIN to access the admin panel"})]}),s.jsx(h.aY,{className:"space-y-6 animate-in fade-in duration-500 delay-800",children:s.jsx(f,{onSuccess:()=>t.push("/")})})]}),(0,s.jsxs)("div",{className:"text-center mt-8 text-sm text-muted-foreground space-y-2 animate-in fade-in duration-700 delay-1000",children:[s.jsx("p",{className:"transition-colors hover:text-foreground cursor-default",children:"\xa9 2024 Codzure Solutions Limited. All rights reserved."}),s.jsx("p",{className:"transition-colors hover:text-foreground cursor-default",children:"AskNyumbani Real Estate Platform"})]})]})})]})}},772:(e,r,t)=>{"use strict";t.d(r,{z:()=>d});var s=t(326),a=t(7577),i=t(4214),n=t(9360),o=t(7863);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...n},d)=>{let u=a?i.g7:"button";return s.jsx(u,{className:(0,o.cn)(l({variant:r,size:t,className:e})),ref:d,...n})});d.displayName="Button"},3071:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>o,SZ:()=>d,Zb:()=>n,aY:()=>u,ll:()=>l});var s=t(326),a=t(7577),i=t(7863);let n=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let o=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let u=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));u.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},2346:(e,r,t)=>{"use strict";t.d(r,{Toaster:()=>n});var s=t(326),a=t(3574),i=t(5999);let n=({...e})=>{let{theme:r="system"}=(0,a.F)();return s.jsx(i.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},6606:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>o,a:()=>l});var s=t(326),a=t(7577),i=t(2945);let n=(0,a.createContext)(void 0);function o({children:e}){let[r,t]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),c=async e=>{try{let{data:r,error:s}=await i.O.rpc("validate_admin_session",{p_session_token:e});if(s||!r||0===r.length){localStorage.removeItem("admin_session_token"),l(null),t(null),u(!1);return}let a=r[0];t({id:a.admin_user_id,email:a.email,full_name:a.full_name,role:a.role,is_active:a.is_active,is_first_login:!1}),l(e)}catch(e){console.error("Session validation error:",e),localStorage.removeItem("admin_session_token"),l(null),t(null)}finally{u(!1)}},m=async(e,r)=>{try{u(!0);let{data:s,error:a}=await i.O.rpc("admin_login",{p_email:e,p_password:r});if(a)return{success:!1,message:a.message};if(!s||0===s.length)return{success:!1,message:"Invalid email or password"};let n=s[0],o=n.session_token;return localStorage.setItem("admin_session_token",o),l(o),t({id:n.admin_user_id,email:n.email,full_name:n.full_name,role:n.role,is_active:n.is_active,is_first_login:n.is_first_login}),{success:!0,message:"Login successful"}}catch(e){return console.error("Login error:",e),{success:!1,message:"An error occurred during login"}}finally{u(!1)}},p=async e=>{try{u(!0);let{data:r,error:s}=await i.O.rpc("admin_login_with_pin",{p_pin:e});if(s)return{success:!1,message:s.message};if(!r||0===r.length)return{success:!1,message:"Invalid PIN"};let a=r[0],n=a.session_token;return localStorage.setItem("admin_session_token",n),l(n),t({id:a.admin_user_id,email:a.email,full_name:a.full_name,role:a.role,is_active:a.is_active,is_first_login:!1}),{success:!0,message:"Login successful"}}catch(e){return console.error("PIN login error:",e),{success:!1,message:"An error occurred during PIN login"}}finally{u(!1)}},g=async e=>{try{if(!r)return{success:!1,message:"No user logged in"};let{error:t}=await i.O.rpc("create_admin_pin",{p_admin_user_id:r.id,p_pin:e});if(t)return{success:!1,message:t.message};return{success:!0,message:"PIN created successfully"}}catch(e){return console.error("Create PIN error:",e),{success:!1,message:"An error occurred creating PIN"}}},x=async()=>{try{o&&await i.O.rpc("invalidate_admin_session",{p_session_token:o})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("admin_session_token"),l(null),t(null)}},f=async()=>{o&&await c(o)};return s.jsx(n.Provider,{value:{user:r,sessionToken:o,isLoading:d,login:m,loginWithPin:p,createPin:g,logout:x,refreshSession:f},children:e})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7480:(e,r,t)=>{"use strict";t.d(r,{QueryProvider:()=>o});var s=t(326),a=t(2852),i=t(4976),n=t(7577);function o({children:e}){let[r]=(0,n.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return s.jsx(i.aH,{client:r,children:e})}},2945:(e,r,t)=>{"use strict";t.d(r,{O:()=>s});let s=(0,t(3815).eI)("https://yqilhwaexdehmrcdblgz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlxaWxod2FleGRlaG1yY2RibGd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwODk3MDAsImV4cCI6MjA3NTY2NTcwMH0.aZhWBpB1EfckSU82hEi_c5tKptjcCMChDETCPjAVESs")},7863:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(1135),a=t(1009);function i(...e){return(0,a.m6)((0,s.W)(e))}},878:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>u});var s=t(9510),a=t(5384),i=t.n(a);t(7272);var n=t(8570);let o=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/providers/query-provider.tsx#QueryProvider`),l=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/contexts/auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/contexts/auth-context.tsx#useAuth`);let d=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/components/ui/sonner.tsx#Toaster`),u={title:"AskNyumbani Admin - Image Review",description:"Admin panel for reviewing and approving property images"};function c({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:i().className,children:s.jsx(o,{children:(0,s.jsxs)(l,{children:[e,s.jsx(d,{})]})})})})}},4687:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx#default`)},7272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[29,142],()=>t(636));module.exports=s})();