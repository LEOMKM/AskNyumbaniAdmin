(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},636:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(4687),s(878),s(5866);var t=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4687)),"/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,878)),"/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx"],u="/login/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1892:(e,r,s)=>{Promise.resolve().then(s.bind(s,2346)),Promise.resolve().then(s.bind(s,6606)),Promise.resolve().then(s.bind(s,7480))},9137:(e,r,s)=>{Promise.resolve().then(s.bind(s,6107))},2230:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6107:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var t=s(326),a=s(7577),i=s(5047),n=s(6606),o=s(772),l=s(9360),d=s(7863);let c=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),u=a.forwardRef(({className:e,variant:r,...s},a)=>t.jsx("div",{ref:a,role:"alert",className:(0,d.cn)(c({variant:r}),e),...s}));u.displayName="Alert",a.forwardRef(({className:e,...r},s)=>t.jsx("h5",{ref:s,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let m=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",e),...r}));m.displayName="AlertDescription";var p=s(165);let g=(0,s(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function x({onSuccess:e,onBack:r}){let{loginWithPin:s,isLoading:i}=(0,n.a)(),[l,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(!1),v=(0,a.useRef)([]),y=(e,r)=>{if(!/^\d*$/.test(r))return;let s=l.split("");s[e]=r;let t=s.join("").slice(0,4);d(t),r&&e<3&&v.current[e+1]?.focus(),4===t.length&&N(t),c&&x("")},b=(e,r)=>{"Backspace"===r.key&&!l[e]&&e>0&&v.current[e-1]?.focus()},N=async r=>{let t=r||l;if(4===t.length){x(""),h(!0);try{let r=await s(t);r.success?e():(x(r.message),d(""),v.current[0]?.focus())}catch(e){x("An unexpected error occurred"),d(""),v.current[0]?.focus()}finally{h(!1)}}},j=e=>{e.preventDefault();let r=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);4===r.length&&(d(r),N(r))};return(0,t.jsxs)("div",{className:"space-y-6",children:[c&&t.jsx(u,{variant:"destructive",children:t.jsx(m,{children:c})}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center space-x-3",children:[0,1,2,3].map(e=>t.jsx("input",{ref:r=>{v.current[e]=r},type:"text",inputMode:"numeric",maxLength:1,value:l[e]||"",onChange:r=>y(e,r.target.value),onKeyDown:r=>b(e,r),onPaste:j,className:"w-12 h-12 text-center text-2xl font-bold border-2 border-input rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none disabled:opacity-50",disabled:f},e))}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your 4-digit PIN"})})]}),t.jsx(o.z,{onClick:()=>N(),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:4!==l.length||f||i,children:f?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground"}),t.jsx("span",{children:"Verifying PIN..."})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(p.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Verify PIN"})]})}),r&&(0,t.jsxs)(o.z,{type:"button",variant:"outline",onClick:r,className:"w-full",disabled:f,children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}var f=s(3071);function h(){let{user:e,isLoading:r}=(0,n.a)(),s=(0,i.useRouter)();return r?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),t.jsx("span",{className:"text-muted-foreground",children:"Loading..."})]})}):e?null:(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[t.jsx("div",{className:"bg-primary text-primary-foreground shadow-lg",children:t.jsx("div",{className:"container mx-auto px-6 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-primary-foreground/20 rounded-lg",children:t.jsx(p.Z,{className:"h-8 w-8 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-primary-foreground",children:"AskNyumbani Admin"}),t.jsx("p",{className:"text-primary-foreground/80",children:"Image Review & Approval System"})]})]})})}),t.jsx("div",{className:"container mx-auto px-6 py-12",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsxs)(f.Zb,{className:"shadow-xl",children:[(0,t.jsxs)(f.Ol,{className:"text-center pb-6",children:[t.jsx("div",{className:"mx-auto mb-4 p-3 bg-primary/10 rounded-full w-fit",children:t.jsx(p.Z,{className:"h-8 w-8 text-primary"})}),t.jsx(f.ll,{className:"text-2xl",children:"Admin Login"}),t.jsx(f.SZ,{children:"Enter your 4-digit PIN to access the admin panel"})]}),t.jsx(f.aY,{className:"space-y-6",children:t.jsx(x,{onSuccess:()=>s.push("/")})})]}),(0,t.jsxs)("div",{className:"text-center mt-8 text-sm text-muted-foreground",children:[t.jsx("p",{children:"\xa9 2025 Codzure Group. All rights reserved."}),t.jsx("p",{className:"mt-1",children:"AskNyumbani Real Estate Platform"})]})]})})]})}},772:(e,r,s)=>{"use strict";s.d(r,{z:()=>d});var t=s(326),a=s(7577),i=s(4214),n=s(9360),o=s(7863);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,...n},d)=>{let c=a?i.g7:"button";return t.jsx(c,{className:(0,o.cn)(l({variant:r,size:s,className:e})),ref:d,...n})});d.displayName="Button"},3071:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>o,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>l});var t=s(326),a=s(7577),i=s(7863);let n=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let o=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},s)=>t.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},s)=>t.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},2346:(e,r,s)=>{"use strict";s.d(r,{Toaster:()=>n});var t=s(326),a=s(3574),i=s(5999);let n=({...e})=>{let{theme:r="system"}=(0,a.F)();return t.jsx(i.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},6606:(e,r,s)=>{"use strict";s.d(r,{AuthProvider:()=>o,a:()=>l});var t=s(326),a=s(7577),i=s(2945);let n=(0,a.createContext)(void 0);function o({children:e}){let[r,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),u=async e=>{try{let{data:r,error:t}=await i.O.rpc("validate_admin_session",{p_session_token:e});if(t||!r||0===r.length){localStorage.removeItem("admin_session_token"),l(null),s(null),c(!1);return}let a=r[0];s({id:a.admin_user_id,email:a.email,full_name:a.full_name,role:a.role,is_active:a.is_active,is_first_login:!1}),l(e)}catch(e){console.error("Session validation error:",e),localStorage.removeItem("admin_session_token"),l(null),s(null)}finally{c(!1)}},m=async(e,r)=>{try{c(!0);let{data:t,error:a}=await i.O.rpc("admin_login",{p_email:e,p_password:r});if(a)return{success:!1,message:a.message};if(!t||0===t.length)return{success:!1,message:"Invalid email or password"};let n=t[0],o=n.session_token;return localStorage.setItem("admin_session_token",o),l(o),s({id:n.admin_user_id,email:n.email,full_name:n.full_name,role:n.role,is_active:n.is_active,is_first_login:n.is_first_login}),{success:!0,message:"Login successful"}}catch(e){return console.error("Login error:",e),{success:!1,message:"An error occurred during login"}}finally{c(!1)}},p=async e=>{try{c(!0);let{data:r,error:t}=await i.O.rpc("admin_login_with_pin",{p_pin:e});if(t)return{success:!1,message:t.message};if(!r||0===r.length)return{success:!1,message:"Invalid PIN"};let a=r[0],n=a.session_token;return localStorage.setItem("admin_session_token",n),l(n),s({id:a.admin_user_id,email:a.email,full_name:a.full_name,role:a.role,is_active:a.is_active,is_first_login:!1}),{success:!0,message:"Login successful"}}catch(e){return console.error("PIN login error:",e),{success:!1,message:"An error occurred during PIN login"}}finally{c(!1)}},g=async e=>{try{if(!r)return{success:!1,message:"No user logged in"};let{error:s}=await i.O.rpc("create_admin_pin",{p_admin_user_id:r.id,p_pin:e});if(s)return{success:!1,message:s.message};return{success:!0,message:"PIN created successfully"}}catch(e){return console.error("Create PIN error:",e),{success:!1,message:"An error occurred creating PIN"}}},x=async()=>{try{o&&await i.O.rpc("invalidate_admin_session",{p_session_token:o})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("admin_session_token"),l(null),s(null)}},f=async()=>{o&&await u(o)};return t.jsx(n.Provider,{value:{user:r,sessionToken:o,isLoading:d,login:m,loginWithPin:p,createPin:g,logout:x,refreshSession:f},children:e})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7480:(e,r,s)=>{"use strict";s.d(r,{QueryProvider:()=>o});var t=s(326),a=s(2852),i=s(4976),n=s(7577);function o({children:e}){let[r]=(0,n.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return t.jsx(i.aH,{client:r,children:e})}},2945:(e,r,s)=>{"use strict";s.d(r,{O:()=>t});let t=(0,s(3815).eI)("https://yqilhwaexdehmrcdblgz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlxaWxod2FleGRlaG1yY2RibGd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwODk3MDAsImV4cCI6MjA3NTY2NTcwMH0.aZhWBpB1EfckSU82hEi_c5tKptjcCMChDETCPjAVESs")},7863:(e,r,s)=>{"use strict";s.d(r,{cn:()=>i});var t=s(1135),a=s(1009);function i(...e){return(0,a.m6)((0,t.W)(e))}},878:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u,metadata:()=>c});var t=s(9510),a=s(5384),i=s.n(a);s(7272);var n=s(8570);let o=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/providers/query-provider.tsx#QueryProvider`),l=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/contexts/auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/lib/contexts/auth-context.tsx#useAuth`);let d=(0,n.createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/components/ui/sonner.tsx#Toaster`),c={title:"AskNyumbani Admin - Image Review",description:"Admin panel for reviewing and approving property images"};function u({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:i().className,children:t.jsx(o,{children:(0,t.jsxs)(l,{children:[e,t.jsx(d,{})]})})})})}},4687:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`/Users/leonard.mutugi/CodzureGroup/AskNyumbaniRealEstate/AskNyumbani(Admin)/app/login/page.tsx#default`)},7272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[29,142],()=>s(636));module.exports=t})();